<main>
    <section class="detail-sec1">
        <div class="detail-container">
            <p class="detail-container__today-title"> {{post.writer}} 님의 고민</p>
            <div class="detail-container__question">
                {% if post.writer.image %}
                <div class="detail-container__top">
                    <img class="detail-container__view-user" src="{{ post.writer.image.url }}" alt="프로필 이미지">
                </div>
                {% else %}
                <div class="detail-container__top">
                    <img class="detail-container__view-user" src="{% static 'photo/mypage-icon.png' %}" alt="프로필 이미지">
                </div>
                {% endif %}
                <div class="detail-container__div">
                    <div class="detail-container__question-box">
                        <div class="question-box__title-box">
                            <h3 class="question-box__title">{{post.title}}</h3>
                        </div>
                        <h4 class="question-box__content">
                            {{post.content}}
                        </h4>
                        <div class="question-box__choice-btns">
                            {% for selection in post.selection_set.all%}
                            {% if forloop.counter == 0 %}
                            <button class="question-box__choice-btn">
                                <div class="choice-btn__content">
                                    <span>{{selection.content}}</span>
                                    <span>{{selection.vote}}</span>
                                </div>
                            </button>
                            {% elif forloop.counter == 1 %}
                            <button class="question-box__choice-btn"
                                onclick="location.href='{% url 'posts:post-detail' post.id %}?param=1'">
                                <div class="choice-btn__content">
                                    <span>{{selection.content}}</span>
                                    <span>{{selection.vote}}</span>
                                </div>
                            </button>
                            {% elif forloop.counter == 2 %}
                            <button class="question-box__choice-btn"
                                onclick="location.href='{% url 'posts:post-detail' post.id %}?param=2'">
                                <div class="choice-btn__content">
                                    <span>{{selection.content}}</span>
                                    <span>{{selection.vote}}</span>
                                </div>
                            </button>
                            {% endif %}
                            {% endfor %}
                        </div>
                    </div>
                    <div class="detail-container__like-btn">
                        <span>공감돼요!</span>
                        <form action="" method="POST" enctype="multipart/form-data">
                            {% csrf_token %}
                            {% if request.user in post.like.all %}
                            <button type="submit" class="like-button">
                                <img src="{% static 'photo/heart.svg'%}" alt="좋아요 취소">
                            </button>
                            {% else %}
                            <button type="submit" class="like-button">
                                <img src="{% static 'photo/heartEmpty.svg'%}" alt="좋아요">
                            </button>
                            {% endif %}
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="likeCountContainer">
            <div class="likeCount">
                <div class="likeCount__comment">
                    <img src="{% static 'photo/message.svg' %}">
                    <span>{{ post.comment_set.all.count }}</span>
                </div>
                <div class="likeCount__heart">
                    <img src="{% static 'photo/heart.svg' %}">
                    <span>{{ post.like.count }}</span>
                </div>
            </div>
        </div>
        <div class="detail-container__border"></div>

    </section>
    <div class="comments">
        <div class="comments-box">

            <div class="comments__border"></div>
            {% for comment in post.comment_set.all %}
            <div class="comments-container">

                <div class="comments-container__userImg">
                    {% if comment.writer.image %}
                    <img src="{{ comment.writer.image.url }}" alt="Profile Picture" height="40" width="40">
                    {% else %}
                    <img src="{% static 'photo/basic_profile.png' %}" alt="" height="40" width="40">
                    {% endif %}
                </div>

                <div class="comments-container__comment-box">
                    <div class="comments-container__comment-box__user-id">
                        {{comment.writer}}
                    </div>
                    <div class="comments-container__comment-box__comment">
                        {{comment.content}}
                    </div>
                    <div class="comments-container__comment-box__time">
                        {{ comment.created_string }}
                    </div>
                    <div class="comments-container__comment-box__img">
                        {% if comment.image %}
                        <img src="{{ comment.image.url }}" alt="">
                        {% endif %}
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
    </div>


</main>